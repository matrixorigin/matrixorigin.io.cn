---
import type { AsideVariant } from '../integrations/astro-asides'

interface Props {
  type?: AsideVariant
  title?: string
}

const { type = 'info', title = 'Aside' } = Astro.props

/**
 * SVG icon paths based on GitHub Octicons
 * @see https://primer.style/design/foundations/icons
 */
const icons: Record<
  NonNullable<Props['type']>,
  { viewBox: string; d: string }
> = {
  info: {
    viewBox: '0 0 18 18',
    d: 'M0 3.75C0 2.784.784 2 1.75 2h12.5c.966 0 1.75.784 1.75 1.75v8.5A1.75 1.75 0 0114.25 14H1.75A1.75 1.75 0 010 12.25v-8.5zm1.75-.25a.25.25 0 00-.25.25v8.5c0 .138.112.25.25.25h12.5a.25.25 0 00.25-.25v-8.5a.25.25 0 00-.25-.25H1.75zM3.5 6.25a.75.75 0 01.75-.75h7a.75.75 0 010 1.5h-7a.75.75 0 01-.75-.75zm.75 2.25a.75.75 0 000 1.5h4a.75.75 0 000-1.5h-4z',
  },
  note: {
    viewBox: '-1 1 18 18',
    d: 'M8.9 1.5C8.7 1.2 8.4 1 8 1s-.7.2-.9.5l-7 12a1 1 0 0 0 0 1c.2.3.6.5 1 .5H15c.4 0 .7-.2.9-.5a1 1 0 0 0 0-1l-7-12zM9 13H7v-2h2v2zm0-3H7V6h2v4z',
  },
  warn: {
    viewBox: '0 0 24 24',
    d: 'M3.75 13.5l10.5-11.25L12 10.5h8.25L9.75 21.75 12 13.5H3.75z',
  },
}

const { viewBox, d } = icons[type]
---

<aside
  class:list={[
    'border rounded p-4 border-l-[6px] my-4 break-inside-avoid-page break-after-avoid-page',
    type === 'info' ? 'bg-blue-100 border-blue-300 border-l-blue-500' : '',
    type === 'note'
      ? 'bg-yellow-100 border-yellow-300 border-l-yellow-500'
      : '',
    type === 'warn' ? 'bg-red-100 border-red-300 border-l-red-500' : '',
  ]}
  aria-label={title}
>
  <p
    aria-hidden="true"
    class:list={[
      'm-0 text-xl flex items-center gap-2 tracking-wide font-bold',
      type === 'info' ? 'text-blue-900' : '',
      type === 'note' ? 'text-yellow-900' : '',
      type === 'warn' ? 'text-red-900' : '',
    ]}
  >
    <span>
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width={18}
        height={18}
        {...{ viewBox }}
      >
        <path fill="currentColor" fill-rule="evenodd" {...{ d }}></path>
      </svg>
    </span>
    {title}
  </p>
  <section>
    <slot />
  </section>
</aside>
