# 推荐生产环境

本篇文档介绍的 MatrixOne 分布式集群的推荐配置适用于生产环境，并具备强大的性能和可靠性。这种配置可以支持亿级数据的数千并发 OLTP 业务，或者处理数十 TB 数据量的 OLAP 业务。

此配置具有高度的可用性保证。无论是 Kubernetes、Minio 还是 MatrixOne，系统都可以在一个节点下线的情况下继续正常运行。这意味着系统具备强大的容错能力，可以在节点故障的情况下保持业务的连续性。

以下内容为推荐生产环境部署规划：

## 软件及硬件配置要求

| **模块**                  | Kubernetes master | Minio | LogService | TN（混部 Proxy 及负载均衡） | CN（混部 Proxy 及负载均衡） |
| :-----------------------: | -------------------------- | ---------- | -------- | -------- | -------------------- |
| **台数（物理机、虚拟机均可）** | 3 台                        | 4 台 | 3 台 | 1 台 | y 台 |
| **节点角色**             | Kubernetes 管控           | 存储服务   | MatrixOne 工作节点 | MatrixOne 工作节点 | MatrixOne 工作节点 |
| **CPU 配置**      | 4 核以上                   | 4 核以上 | 4 核以上  | 16 核以上 | 16 核以上 |
| **内存配置** | 8GB 以上                  | 8GB 以上 | 8GB 以上 | 64GB 以上 | 32GB 以上 |
| **网卡** | 双万兆网口，万兆网卡              | 同上 | 同上 | 同上 | 同上 |
| **系统盘配置** | 每节点 PCIe NVME SSD 3.0 × 1 块 100GB，建议做 Raid 1 | 同上 | 同上 | 同上 | 同上 |
| **Kubernetes 盘配置** | 每节点 PCIe NVME SSD 3.0 × 1 块 100GB，建议做 Raid 1 | 同上 | 同上 | 同上 | 同上 |
| **数据盘配置** | N/A | 每节点 PCIe NVME SSD 3.0 × 4 块 × a G/块，raid 无要求，建议物理分盘，可逻辑分盘。 | 每节点 NVME SSD 3.0/4.0 (1G/s 以上读取速率) × 1 块 × b G/块。 | NVME SSD 3.0/4.0 × 2 块 × c G/块 | 每节点 NVME SSD 3.0/4.0 × 2 块 × d G/块。 |
| **备注** |  | a 与业务数据量相关，a = 业务数据量×2/16。 | b 与业务数据量相关，越接近越好。 | c 与业务数据量相关，越接近越好。其中一块给 TN/CN 故障恢复时备用。 | d 与业务数据量相关，越接近越好。其中一块给 TN/CN 故障恢复时备用。y 与业务负载相关。 |

## 其他配置

| 操作系统                                   | 支持的 CPU 架构 |
| :----------------------------------------- | :-------------- |
| Debian 11 以上版本（Kernel 内核要求 5.0 以上） | X86_64          |

由于每个私有化生产环境部署场景均存在差异，有关具体部署方案及部署细节，请联系 MatrixOne 的客户支持团队。
