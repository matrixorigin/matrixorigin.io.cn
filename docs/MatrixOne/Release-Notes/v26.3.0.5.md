# **MatrixOne v25.3.0.5 发布报告**  

发布日期：2026 年 1 月 5 日  

MatrixOne 版本：v25.3.0.5  

MatrixOne 3.0.5 引入了一系列改进和错误修复，以提升系统的易用性。以下是主要更新内容：  

## **优化**  

### 向量搜索 & AI 功能（Vector Search & AI Features）

- 向量索引增强：移除 IVF 和 FullText 索引的实验性标志，使其达到生产可用状态

- 向量预过滤：新增 enable_vector_prefilter_by_default 变量支持，并支持 IVF 预过滤

- 向量距离输出：Reader 直接输出向量距离，提升整体性能

- 归一化 L2 支持：允许 normalized_l2 使用向量索引

### 数据分支 & Git4Data（Data Branch & Git4Data）

- 数据分支操作：完整支持数据分支的创建（create）、对比（diff）和暂存（stage）

- 数据库 / 表管理：支持在数据分支中删除数据库和表

- 并行处理：数据分支 diff 支持并行写入远端存储

- 上下文感知关键字：数据分支相关关键字支持上下文感知

### CDC (Change Data Capture)

- CDC 重构：基于既有设计对 CDC 进行完整重实现

- GC 支持：GC 现已支持 CDC 相关功能

- 水位线管理：改进 CDC watermark 的管理与清理逻辑

- 指标面板：新增 CDC 指标监控面板

### 性能与优化（Performance & Optimization）

- 索引选择：优化索引选择算法

- LIMIT BY RANK：针对 LIMIT BY RANK 查询进行性能优化

- FullText 下推：在无过滤条件时限制 FullText 下推

- 查询指标：在 EXPLAIN ANALYZE 中新增 ReadSize、S3ReadSize 和 DiskReadSize 指标

### 基础设施与开发（Infrastructure & Development）

- 角色管理：支持重命名角色（rename role name）

- 多 CN 开发：新增 multi-cn 的 docker-compose 文件，便于开发和测试

- Go 版本升级：Go 版本升级至 1.25.4

- 日志优化：移除或优化部分日志，减少日志噪音

## **错误修复**  

### 严重 Panic 与崩溃问题（Critical Panics & Crashes）

- 多 CN IVF 搜索：修复 multi-cn 场景下 ivf 搜索触发的 panic

- JOIN 条件转换：修复 JOIN 条件类型转换失败时的 panic

- COUNT DISTINCT：修复 count(distinct (,)) 使用时的 panic

- JOIN 中的 ORDER BY：修复 JOIN 查询中 ORDER BY 引发的 panic

- 远程工作区：修复远程运行 workspace 的 panic

- Insert Ignore：修复 insert ignore 触发的 panic

### 数据一致性问题（Data Consistency Issues）

- Multi-update 空值掩码：修复 multi_update shrink 过程中 null mask 被错误修改的问题

- 数据不一致：修复因 lock service 标志过期导致的数据不一致

- 索引表一致性：修复 INSERT ON DUPLICATE KEY UPDATE 场景下索引表数据不一致的问题

- 陈旧读（Stale Read）：修复多处陈旧读相关问题

- 批次复用问题：修复 batch 在 Vecs/Attrs 不同时复用导致的数据映射错误

### CDC 专项修复（CDC-specific Fixes）

- CDC 数据丢失：修复 CDC pause / resume / restart 场景下的数据丢失问题

- CDC 重启问题：修复 CDC 上游重启后下游 delete 数据丢失的问题

- CDC 水位线：修复 CDC watermark 更新逻辑及陈旧 watermark 清理问题

- CDC 陈旧读：修复 CDC 相关的 stale read 问题

### SQL & 查询修复（SQL & Query Fixes）

- 外键动作：在 ConstructCreateTableSQL 中正确格式化外键动作

- 列裁剪：修复应用结合律规则时列裁剪失败的问题

- JOIN 重映射：修复 JOIN 中跨表列引用导致的 remap 错误

- Left JOIN OR：修复 left join OR 谓词回归问题

- 影响行数：修复 delete / replace 语句返回错误影响行数的问题

- 类型转换与 Casting（Type Conversion & Casting）

- TEXT → CHAR/VARCHAR：TEXT 转 CHAR/VARCHAR 时跳过长度校验

- TIMESTAMP 解析：LOAD DATA 解析 TIMESTAMP 时使用 session 时区

- 小数秒精度：TIME / DATETIME 全链路强制小数秒精度一致

### 基础设施修复（Infrastructure Fixes）

- Autocommit 同步：修复 autocommit 状态同步问题

- 连接均衡：修复代理在快速连接场景下的连接均衡问题

- 客户端连接池：修复 client pool 在 CI 中的随机失败问题

- 版本信息：修复构建镜像时版本信息丢失的问题

## **详细更新日志**  

[v25.3.0.4-v25.3.0.5 变更记录](https://github.com/matrixorigin/matrixone/compare/v3.0.4...v3.0.5)  